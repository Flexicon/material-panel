<ng-container *ngIf="!loading">
    <mat-card *ngFor="let post of posts" class="post">
        <mat-card-header>
            <div mat-card-avatar [routerLink]="['/users', post.userId]">
                <ngx-avatar [name]="post.user.name" size="40"></ngx-avatar>
            </div>
            <mat-card-title>
                <strong>{{post.title}}</strong>
            </mat-card-title>
            <mat-card-subtitle fxLayout="row" fxLayoutAlign="space-between center">
                <div>
                    by: <a [routerLink]="['/users', post.userId]">{{post.user.username}}</a>
                </div>
                <div>
                    <span class="likes"><mat-icon>thumb_up</mat-icon> {{post.likes}}</span>
                    <span class="shares"><mat-icon>share</mat-icon> {{post.shares}}</span>
                </div>
            </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p>{{post.body}}</p>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button color="primary"
                    (click)="togglePostLike(post)"
                    [ngClass]="{ 'active': post.liked }">
                LIKE
                <mat-icon>thumb_up</mat-icon>
            </button>
            <button mat-button color="accent"
                    (click)="togglePostShare(post)"
                    [ngClass]="{ 'active': post.shared }">
                SHARE
                <mat-icon>share</mat-icon>
            </button>
        </mat-card-actions>
    </mat-card>
</ng-container>

<app-loader [loading]="loading"></app-loader>
